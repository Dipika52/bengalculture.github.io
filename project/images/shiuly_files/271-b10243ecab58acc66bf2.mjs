(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[271],{"/MAO":function(e,t,o){var i=o("q1tI"),n=o("/MKj"),r=o("FDmi"),s=o("TSYQ"),a=o.n(s),l=o("pSwN"),c=o("qD10"),d=o("n6mq"),u=o("ZVOf"),h=o("U4JR"),p=o("nKUr");t.a=Object(n.connect)(null,(function(e){return{follow:t=>e(Object(u.a)(t)),unfollow:t=>e(Object(u.c)(t))}}))((function({className:e,follow:t,isSelf:o,logData:n,showName:s=!1,showFollow:u=!1,size:m="small",subtitle:f="",title:g,unfollow:b,user:j={}}){const[O,_]=Object(i.useState)(j.explicitly_followed_by_me||!1),{full_name:T,username:E}=j,y=j.image_key||j.image_medium_url||j.image_small_url;return Object(p.jsx)("div",{className:a()("Module","User","hasText","thumb",m,e),children:Object(p.jsxs)(d.e,{alignItems:"center",direction:"row",display:"flex",marginStart:-1,marginEnd:-1,paddingY:1,children:[Object(p.jsx)(d.e,{flex:"grow",paddingX:1,children:Object(p.jsx)(c.a,{className:"profileSource",to:`/${E}/`,children:Object(p.jsxs)(d.e,{display:"flex",children:[Object(p.jsx)("div",{className:"thumbImageWrapper",children:Object(p.jsx)(r.a,{name:T,src:y,size:"fit"})}),g&&Object(p.jsx)("h3",{className:"title",children:g}),s&&Object(p.jsx)("h4",{className:"fullname",children:T}),f&&Object(p.jsx)("div",{className:"subtitle",children:f})]})})}),u&&Object(p.jsx)(d.e,{paddingX:1,children:Object(p.jsx)(l.a,{handleFollowClick:()=>{O?(b(j.id),_(!1)):(t(j.id),_(!0)),n&&Object(h.b)(101,n)},isFollowing:O,isSelf:Boolean(o)})})]})})}))},"1E1Y":function(e,t,o){o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return r}));const i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},n={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},r={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},"2ajD":function(e,t){e.exports=function(e){return e!=e}},"45Q2":function(e,t,o){var i=o("q1tI"),n=o("sZWH"),r=o("d7ng"),s=o("1ycI"),a=o("Ye/N"),l=o("eOdZ"),c=o("U4JR"),d=o("P9b8"),u=o("ANjH"),h=o("gdcG"),p=o("n6mq"),m=o("nKUr");function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class g extends i.Component{constructor(...e){super(...e),f(this,"attemptToAttachVideoTag",()=>{if(this._videoContainerRef&&this._videoContainerRef.childNodes[0])return;const{videoUrls:e,width:t,height:o}=this.props;if(!e||!e.length)return;const i=document.createElement("video"),n=Object.keys(e);for(let r=0;r<n.length;r+=1){const t=document.createElement("source");t.type="hls"===n[r]?"m3u8":"video/mp4",e[n[r]]&&(t.src=e[n[r]]),i.appendChild(t)}i.addEventListener("loadedmetadata",()=>{setTimeout(()=>this.captureFrame(i),500)},!1),i.height=o,i.setAttribute("crossOrigin","anonymous"),i.width=t,i.loop=!0,i.load(),this._videoContainerRef&&this._videoContainerRef.appendChild(i)}),f(this,"_videoContainerRef",null),f(this,"removeVideoTag",()=>{this._videoContainerRef&&this._videoContainerRef.childNodes[0]&&this._videoContainerRef.removeChild(this._videoContainerRef.childNodes[0])}),f(this,"captureFrame",e=>{const{onVideoLoaded:t,uploadId:o,videoId:i}=this.props,n=document.createElement("canvas");n.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight);const r=n.toDataURL();o&&i&&t({video:{videoId:i,uploadId:o,thumbnail:r}})}),f(this,"clear",({event:e})=>{e.stopPropagation(),this.removeVideoTag(),this.props.handleRemoveClick()})}get isPin(){const{display:e,imagePreviewSrc:t,videoUrls:o}=this.props;return!("pin"!==e||!t&&!o)}renderProgressBar(){const{imagePreviewSrc:e,isVideo:t,progress:o}=this.props,i=100===o||0===o||!e&&!t?"uploadProgressBar transition":"uploadProgressBar",n=e||t?o:0;return Object(m.jsx)("div",{className:i,style:{width:n+"%"}})}renderDropZone(){return Object(m.jsxs)(p.e,{children:[Object(m.jsx)(p.e,{justifyContent:"center",alignItems:"center",display:"flex",children:Object(m.jsx)(p.e,{justifyContent:"center",alignItems:"center",display:"flex",children:Object(m.jsx)(p.u,{color:"darkGray",icon:"camera",accessibilityLabel:a.a._("Add a Photo","Add a photo as part of a form","Add a photo as part of a form"),size:32})})}),Object(m.jsx)(p.e,{marginTop:2,paddingX:12,children:Object(m.jsx)(p.Y,{align:"center",color:"darkGray",weight:"bold",children:a.a._("Drag and drop or click to upload","Label on drag/drop area for uploading a pin","Label on drag/drop area for uploading a pin")})})]})}renderImage(){const{height:e,imagePreviewSrc:t,width:o}=this.props,i=a.a._("Your Upload","Image a pinner just uploaded to a form","Image a pinner just uploaded to a form");return this.isPin?Object(m.jsx)("img",{alt:i,src:t}):Object(m.jsx)(p.w,{alt:i,src:t,fit:"cover",naturalHeight:e,naturalWidth:o})}renderResetButton(){return Object(m.jsx)(p.e,{top:!0,left:!0,position:"absolute",margin:2,children:Object(m.jsx)(p.v,{accessibilityLabel:a.a._("Remove Photo","Remove photo from a form","Remove photo from a form"),bgColor:"lightGray",icon:"clear",iconColor:"darkGray",onClick:this.clear,size:"sm"})})}renderContent(){const{height:e,imagePreviewSrc:t,isHovering:o,isVideo:n,isVideoComplete:r,isOver:s,thumbnail:l,videoUrls:c,allowReset:d=!0,width:u}=this.props,h=c?Object(m.jsx)("video",{height:this.isPin?"auto":e,width:u,autoPlay:!0,controls:!0,loop:!0,poster:l||"",children:Object.keys(c).map(e=>Object(m.jsx)("source",{src:c[e],type:"hls"===e?"m3u8":"video/mp4"},e))}):null,f=s?"lightGray":"white";return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsx)(p.B,{rounding:2,height:"100%",children:Object(m.jsxs)(p.e,{color:f,height:"100%",justifyContent:"center",alignItems:"center",display:"flex",children:[!t&&!n&&this.renderDropZone(),n&&!c&&Object(m.jsxs)(p.e,{children:[r&&Object(m.jsx)(p.Y,{align:"center",weight:"bold",children:a.a._("Processing Video","Loading message shown while user video is uploading","Loading message shown while user video is uploading")}),Object(m.jsx)(p.e,{paddingY:4,children:Object(m.jsx)(p.R,{show:!0,accessibilityLabel:a.a._("Video uploading","Loading spinner while video uploads","Loading spinner while video uploads")})})]}),h,t&&this.renderImage()]})}),(t||c)&&d&&o&&this.renderResetButton()]})}render(){const{connectDropTarget:e,height:t,imagePreviewSrc:o,onClick:i,videoUrls:n,width:r,hoverHandlers:{onMouseOver:s,onMouseLeave:a}}=this.props,l=this.isPin?"auto":t,c={width:r,border:this.isPin?0:"2px dashed #767676",borderRadius:"10px",cursor:o?"default":"pointer",height:l,marginLeft:"auto",marginRight:"auto",outline:"none",padding:0},d=Object(m.jsxs)(p.e,{position:"relative",children:[this.renderProgressBar(),o||n?Object(m.jsx)("div",{onMouseEnter:s,onMouseLeave:a,style:{...c},children:this.renderContent()}):Object(m.jsx)("button",{style:c,onClick:i,onMouseEnter:s,onMouseLeave:a,children:this.renderContent()})]});return e(Object(m.jsx)("div",{children:d}))}}var b=Object(u.compose)(h.a,Object(d.DropTarget)(e=>e.accepts,{drop:(e,t)=>{e.onDrop&&e.onDrop(e,t)}},(e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()})))(g);function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const O=["video/quicktime","video/mp4"],_=e=>e>=200&&e<400;class T extends i.Component{constructor(...e){var t;super(...e),t=this,j(this,"state",{file:null,imagePreviewSrc:this.props.existingImageSrc||"",isVideo:!1,isVideoComplete:!1,thumbnail:null,videoUrls:null,uploadId:null,errorFlyout:null,progress:0}),j(this,"mounted",!1),j(this,"containerRef",null),j(this,"fileReader",null),j(this,"file",null),j(this,"fileInputRef",null),j(this,"xhr",null),j(this,"CHECK_VIDEO_TIMEOUT",null),j(this,"ERROR_MESSAGE",a.a._("Unable to upload video. Please try again later.","Error shown when we can't accept video uploads","Error shown when we can't accept video uploads")),j(this,"handleFileDrop",(e,t)=>{if(t&&(!this.xhr||4===this.xhr.readyState)){const e=t.getItem().files[0];this.handleFile(e)}}),j(this,"handleFile",e=>{const{onImageUploadStart:t}=this.props;e.size>2e9?this.showError(a.a._("The video is too large. The maximum size is 2 GB.","Error if a user tries to upload a video that is too large","Error if a user tries to upload a video that is too large")):this.props.allowVideo&&O.includes(e.type)?(this.loadVideo(e),t()):(this.fileReader.onload=()=>this.uploadImage(e),this.fileReader.readAsDataURL(e),t())}),j(this,"showError",e=>{const t=Object(m.jsx)(p.I,{color:"red",anchor:this.containerRef,idealDirection:this.props.idealErrorDirection,onDismiss:()=>this.setState({errorFlyout:null}),size:"sm",shouldFocus:!1,children:Object(m.jsx)(p.e,{padding:3,children:Object(m.jsx)(p.Y,{color:"white",weight:"bold",children:Object(m.jsx)("span",{children:e})})})});this.removePreview(t)}),j(this,"openFileDialog",()=>{this.state.imagePreviewSrc||this.state.isVideo||(Object(c.b)(101,{component:192,element:1156}),this.fileInputRef&&this.fileInputRef.click())}),j(this,"openFile",e=>{const t=e.target.files[0];this.handleFile(t)}),j(this,"removePreview",e=>{this.setState({imagePreviewSrc:"",progress:0,isVideo:!1,isVideoComplete:!1,videoUrls:null,errorFlyout:e}),this.fileInputRef&&(this.fileInputRef.value=""),this.xhr&&this.xhr.abort&&(this.xhr.abort(),this.xhr=null),this.CHECK_VIDEO_TIMEOUT&&clearTimeout(this.CHECK_VIDEO_TIMEOUT),this.props.onReset&&this.props.onReset()}),j(this,"loadVideo",e=>{this.setState({isVideo:!0}),l.a.create("VIPResource",{type:"video"}).callCreate().then(t=>{const{upload_id:o,upload_url:i,upload_parameters:n}=t.resource_response.data;this.setState({uploadId:o}),this.uploadVideo(e,o,i,n)},()=>{this.showError(this.ERROR_MESSAGE)})}),j(this,"checkForVideo",(async function(e){const o=await l.a.create("VIPResource",{upload_ids:[e]}).callGet();if(o.resource_response&&o.resource_response.data&&o.resource_response.data[e]){const i=o.resource_response.data[e],{status:n,signature:r}=i;if("processing"===n||"registered"===n)t.CHECK_VIDEO_TIMEOUT=setTimeout(()=>t.checkForVideo(e),1e3);else if("succeeded"===n){const o=await l.a.create("VideoUrlsResource",{signatures:[r]}).callGet();t.handleVideoUploadSuccess(o,r,e)}else t.showError(t.ERROR_MESSAGE)}else t.showError(t.ERROR_MESSAGE)})),j(this,"uploadImage",e=>{this.setState({imagePreviewSrc:this.fileReader.result,isVideo:!1});const t=Object(r.a)("/upload-image/"),o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("X-CSRFToken",s.default.getCSRFToken()),o.setRequestHeader("X-UPLOAD-SOURCE",this.props.uploadSource||"unknown"),o.setRequestHeader("Accept","application/json"),o.upload.onprogress=e=>{const t=Math.round(100*e.loaded/e.total);this.setState({progress:t})},o.onload=()=>{if(_(o.status)){const e=JSON.parse(o.responseText);e.success?(this.props.onImageUploadFinished({image:{height:e.height,url:e.image_url,width:e.width}}),this.setState({errorFlyout:null})):this.showError(e.error)}};const i=new FormData;i.append("img",e),o.send(i),this.xhr=o})}componentDidMount(){this.mounted=!0,this.fileReader=new FileReader}componentWillUnmount(){this.mounted=!1}uploadVideo(e,t,o,i){const n=new XMLHttpRequest;n.open("POST",o,!0),n.onload=()=>{_(n.status)?this.setState({errorFlyout:null,progress:100,isVideoComplete:!0}):this.showError(a.a._("Something went wrong. Please try again later.","Error if video fails to upload","Error if video fails to upload")),this.checkForVideo(t)},n.upload.onprogress=e=>{const t=Math.round(100*e.loaded/e.total);this.setState({progress:t})};const r=new FormData;for(const s in i)r.append(s,i[s]);r.append("file",e),n.send(r),this.xhr=n}handleVideoUploadSuccess(e,t,o){if(!this.mounted)return;const i=e.resource_response.data,n="https://i.pinimg.com/"+i[t].metadata.thumbnail,r=i[t].urls;this.setState({videoUrls:r,thumbnail:n});const s=new XMLHttpRequest;s.onload=()=>{const e=new FileReader;e.onloadend=()=>{this.props.onImageUploadFinished({video:{uploadId:o,imageBase64:e.result}})},e.readAsDataURL(s.response)},s.open("GET",n),s.responseType="blob",s.send()}render(){const{FILE:e}=n.NativeTypes,{errorFlyout:t,imagePreviewSrc:o,isVideo:i,isVideoComplete:r,progress:s,thumbnail:a,videoUrls:l}=this.state,{allowReset:c,allowVideo:d,display:u,height:h,width:f}=this.props,g=o,j=d?"image/*,video/mp4,video/quicktime":"image/*";return Object(m.jsxs)(p.e,{ref:e=>{this.containerRef=e},children:[Object(m.jsx)(p.e,{display:"visuallyHidden",children:Object(m.jsx)("input",{accept:j,onChange:this.openFile,ref:e=>{this.fileInputRef=e},type:"file"})}),Object(m.jsx)(b,{allowReset:c,onClick:this.openFileDialog,handleRemoveClick:this.removePreview,imagePreviewSrc:g,accepts:[e],onDrop:this.handleFileDrop,height:h,width:f,progress:s,isVideo:i,isVideoComplete:r,videoUrls:l,thumbnail:a,display:u}),t]})}}j(T,"defaultProps",{onImageUploadStart:()=>{}});t.a=T},"4qC0":function(e,t,o){var i=o("NykK"),n=o("Z0cm"),r=o("ExA7");e.exports=function(e){return"string"==typeof e||!n(e)&&r(e)&&"[object String]"==i(e)}},"7dZ5":function(e,t,o){o.d(t,"a",(function(){return S}));var i=o("q1tI"),n=o("TSYQ"),r=o.n(n),s=o("Ye/N"),a=o("ijCd"),l=o.n(a),c=o("qyXF"),d=o("qD10"),u=o("kmwA"),h=o("v/Q4"),p=o("4dcN"),m=o("eOdZ");function f(e){const t=m.a.create("UserBlockResource",{blocked_user_id:e}),o="user_block";return t.callCreate().then(()=>{p.a.trackEvent(o,"success")},()=>{p.a.trackEvent(o,"error")})}var g=o("n6mq"),b=o("vvax"),j=o("ty8j"),O=o("nKUr");const _=u.a.settings.HELP_BLOCKING+"?source=block_dialogue";function T(e){return e.map(({full_name:e})=>e)}var E=function({users:e,onClose:t,isLoading:o,onSubmit:i}){const n=Object(O.jsx)("strong",{children:Object(c.a)(T(e))},"userlist");return Object(O.jsxs)("form",{method:"post",children:[Object(O.jsxs)(g.e,{padding:2,children:[Object(b.b)(s.a._("If you block {{ users }}, you won’t be able to follow  each other or interact with each other’s Pins.","description of blocking users","description of blocking users"),{users:n}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("a",{className:"external",href:_,children:s.a._("Learn more","link to learn more about blocking","link to learn more about blocking")})]}),Object(O.jsx)("div",{className:"formFooter",children:Object(O.jsx)("div",{className:"formFooterButtons",children:Object(O.jsxs)(g.e,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[Object(O.jsx)(g.e,{paddingX:1,children:Object(O.jsx)(g.f,{id:"cancelButton",onClick:t,text:s.a._("Cancel","UserBlock.Cancel","cancel form")})}),Object(O.jsx)(g.e,{paddingX:1,children:Object(O.jsx)(g.f,{color:"red",id:"submitButton",onClick:i,text:s.a._("Block","UserBlock.Submit","submit form to block users"),type:"submit"})})]})})})]})},y=o("1E1Y");const w=u.a.settings.HELP_BLOCKING,v=u.a.settings.POLICY_COMMUNITY_GUIDELINES;var x=({board:e,detailedReasons:t,flagReason:o,flagType:n,onClose:a,selectedReason:u,status:p,users:m})=>{const[_,x]=Object(i.useState)({}),{setModalTitle:I,setStatus:D}=Object(j.b)(),C=Object(h.a)(),{id:R}=C.isAuth?C:{},k=null==e?void 0:e.followed_by_me,S=m[0].explicitly_followed_by_me,P=m.filter(({id:e})=>_[e]),A=P.length>0;Object(i.useEffect)(()=>{(()=>{let e;l()([y.c.SUBMITTED,y.c.PROCESSING],p)?e=s.a.ngettext("Block this person?","Block these people?",P.length,"BlockAndUnfollow","Confirmation text when blocking users (plural)"):n===y.a.CONVERSATION&&(e=p===y.c.COMPLETED?Object(b.b)(s.a._("You’ve blocked {{usernames}}","BlockAndUnfollow","title of modal after user has been blocked"),{usernames:Object(c.a)(T(P)).join("")}).join(""):s.a._("Thanks for your report","BlockAndUnfollow","title at end of report flow")),I(e)})()},[p]),Object(i.useEffect)(()=>{D(A?y.c.SELECTED:y.c.STARTED)},[_]);const M=m.filter(({id:e})=>e!==R),L=({target:{value:e}})=>{x({..._,[e]:!Boolean(_[e])})},N=()=>{x(_),D(y.c.SUBMITTED)},U=({id:e,full_name:t})=>function(e,t){const{id:o,value:i,isSelected:n,labelText:r,labelDescription:s,handler:a}=e;return Object(O.jsxs)("label",{className:"blockAndUnfollowFormLabel",htmlFor:o,onChange:a,children:[Object(O.jsx)("input",{id:o,name:"action",type:"checkbox",value:i,checked:n}),Object(O.jsx)("span",{className:"uncheckedBox",children:"☐"}),Object(O.jsx)("span",{className:"checkedBox",children:"☑"}),Object(O.jsxs)("div",{className:"labelWrapper",children:[r,Object(O.jsx)("span",{className:"labelDescription",children:s})]})]},o)}({id:"blockPinner"+e,value:e,labelText:Object(b.b)(s.a._("Block {{ pinnerName }}","BlockAndUnfollow","form option to block a pinner"),{pinnerName:t}),labelDescription:s.a._("You won’t be able to send each other messages or interact with each other’s Pins.","BlockAndUnfollow","explanation of blocking a user"),isSelected:Boolean(_[e]),handler:L});let G;return G=l()([y.c.STARTED,y.c.COMPLETED],p)?Object(O.jsx)(g.f,{color:"red",onClick:a,text:s.a._("Done","Block.Complete","confirm reporting flow is done & close modal")}):Object(O.jsx)(g.f,{color:"red",onClick:N,text:s.a._("Block","BlockAndUnfollow","submit users to block")}),Object(O.jsx)("form",{className:r()({BlockAndUnfollowForm:p!==y.c.COMPLETED,ConfirmDialog:p===y.c.COMPLETED,fluid:p===y.c.COMPLETED}),method:"post",children:l()([y.c.SUBMITTED,y.c.PROCESSING],p)?Object(O.jsx)(E,{isLoading:p===y.c.PROCESSING,onClose:()=>{D(y.c.SELECTED)},onSubmit:()=>(D(y.c.PROCESSING),Promise.all(Object.keys(_).filter(e=>_[e]).map(e=>f(e))).finally(()=>{D(y.c.COMPLETED)})),users:P}):Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)("div",{className:r()("flagContent",{modalActionDescription:p===y.c.COMPLETED}),children:p!==y.c.COMPLETED?(()=>{let e,t;return"harassingOther"===u?e=Object(b.b)(s.a._("We remove content that identifies and attacks private people because we consider it to be bullying. We also don’t allow content that reveal someone’s personally identifiable information.  Learn more about our  {{ communityGuidelines }}.","confirmation message after reporting harassment","confirmation message after reporting harassment"),{communityGuidelines:Object(O.jsx)(d.a,{to:v,children:s.a._("Community Guidelines","link to community guidelines for harassment","link to community guidelines for harassment")},"policyLink")}):"harassingPublicFigure"===u?e=s.a._("Please note that we won’t necessarily take down stuff that attacks public figures.","message shown after reporting harrassment","message shown after reporting harrassment"):"harassingFriend"===u?e=s.a._("Before we can review this Pin, we need to hear from the person who’s being harassed. Please have your friend report this Pin to us.","message shown after reporting harrassment","message shown after reporting harrassment"):l()(["spam","policies","hurtfulContent"],o)&&(e=s.a._("We’ll take a look at this Pin and delete it if it goes against our policies.","confirmation message after reporting a pin","confirmation message after reporting a pin")),t=k&&S?s.a._("You can also unfollow or block this person.","description to block or unfollow","description to block or unfollow"):s.a.ngettext("You can also block this person.","You can also block these people.",M.length,"description to block people","description to block people"),Object(O.jsxs)("div",{className:"blockAndUnfollowFormContent",children:[Object(O.jsxs)("div",{className:"modalDescription",children:[e&&Object(O.jsxs)("div",{children:[e,Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]}),t]}),M.map(e=>U(e))]})})():A&&Object(O.jsx)("span",{children:s.a._("You won’t be able to follow each other or interact with each other’s pins.","BlockAndUnfollow","message describing what blocking means")},"blockingConfirmation")}),Object(O.jsxs)("div",{className:"formFooter",children:[p!==y.c.COMPLETED&&Object(O.jsx)("p",{className:"helpText",children:Object(b.b)(s.a._("Learn more about {{ linkToTopic }}","BlockAndUnfollow","footer link to learn more about a topic"),{linkToTopic:Object(O.jsx)(d.a,{to:w,children:s.a._("blocking","BlockAndUnfollow","footer link to learn more about blocking")},"policyLink")})}),Object(O.jsx)("div",{className:"formFooterButtons",children:G})]})]})})};function I(e,t,o){return e.map((e,i)=>{const{condition:n}=e;return void 0===n||n?function(e,t,o,i){const{text:n,value:r,category:s}=e;return Object(O.jsx)("label",{className:"flagReasonLabel",htmlFor:r,children:Object(O.jsxs)(g.e,{alignItems:"center",padding:2,display:"flex",children:[Object(O.jsx)(g.K,{checked:o===r,id:r,onChange:e=>t(e,r,s),name:"flagReason",value:r}),Object(O.jsx)(g.e,{padding:2,children:Object(O.jsx)(g.Y,{size:"md",children:n})})]})},i)}(e,t,o,i):null})}class D{constructor(e){this.config=e,this.configMap=function(e){const t={};for(const o in e)e[o].forEach(e=>{const i=e.value;if(Object.prototype.hasOwnProperty.call(t,i))throw new Error("Duplicate key in FlagOptions config: "+i);t[i]=e,t[i].parentOption=o});return t}(e)}getFlagOption(e){return this.configMap[e]}renderFlagLabels(e){const{flagReason:t,onSelectReason:o,selectedReason:i}=e;return I(this.config[t],o,i)}}function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const R=u.a.settings.POLICY_COMMUNITY_GUIDELINES,k={contentContainer:{color:"#999",display:"table",fontSize:13,height:360,width:550},contents:{display:"table-cell",padding:"0 18px",textAlign:"center",verticalAlign:"middle"}};class S extends i.Component{constructor(...e){super(...e),C(this,"flagOptions",new D(this.props.flagOptionsConfig)),C(this,"handleClose",()=>{this.props.onClose()}),C(this,"handleRevert",()=>{this.props.onRevert&&this.props.onRevert()}),C(this,"handleNext",()=>{this.props.onNext&&this.props.onNext()}),C(this,"renderPolicyLink",()=>{const{flow:e,flagReason:t}=this.props;if(e===y.b.REPORT){if("attacks"===t)return Object(O.jsx)(g.Y,{size:"sm",children:Object(b.b)(s.a._("Learn more about our {{ linkToTopic }}","footer link to learn more about community guidelines","footer link to learn more about community guidelines"),{linkToTopic:Object(O.jsx)(d.a,{internalNewTab:!0,to:R,children:Object(O.jsx)(g.Y,{inline:!0,color:"red",size:"sm",weight:"bold",children:s.a._("Community Guidelines","name of footer link to community guidelines","name of footer link to community guidelines")})},"policyLink")})});if("policies"===t)return Object(O.jsxs)("p",{children:[Object(O.jsx)(g.Y,{size:"sm",children:Object(b.b)(s.a._("Learn about {{ linkToTopic }}","footer link to learn more about a topic","footer link to learn more about a topic"),{linkToTopic:Object(O.jsx)(d.a,{internalNewTab:!0,to:R+"#sub-section-adult-content",children:Object(O.jsx)(g.Y,{inline:!0,color:"red",size:"sm",children:s.a._("our nudity policies","name of footer link to policy","name of footer link to policy")})},"policyLink")})}),Object(O.jsx)(g.Y,{size:"sm",children:Object(b.b)(s.a._("Learn about {{ linkToTopic }}","footer link to learn more about a topic","footer link to learn more about a topic"),{linkToTopic:Object(O.jsx)(d.a,{internalNewTab:!0,to:R+"#sub-section-dangerous-goods-and-activities",children:Object(O.jsx)(g.Y,{inline:!0,color:"red",size:"sm",children:s.a._("our policies on hurtful content","name of footer link to policy","name of footer link to policy")})},"policyLink")})}),Object(O.jsx)(g.Y,{size:"sm",children:Object(b.b)(s.a._("Learn about {{ linkToTopic }}","footer link to learn more about a topic","footer link to learn more about a topic"),{linkToTopic:Object(O.jsx)(d.a,{internalNewTab:!0,to:R+"#sub-section-violence",children:Object(O.jsx)(g.Y,{inline:!0,color:"red",size:"sm",children:s.a._("our policies on gore","name of footer link to policy","name of footer link to policy")})},"policyLink")})})]});if("spam"===t||void 0===t)return Object(O.jsx)(g.Y,{size:"sm",children:Object(b.b)(s.a._("Learn about {{ linkToTopic }}","footer link to learn more about a topic","footer link to learn more about a topic"),{linkToTopic:Object(O.jsx)(d.a,{internalNewTab:!0,to:R,children:Object(O.jsx)(g.Y,{inline:!0,color:"red",size:"sm",weight:"bold",children:"spam"===t?s.a._("our spam policies","name of footer link to policy","name of footer link to policy"):s.a._("our policies","name of footer link to policy","name of footer link to policy")})},"policyLink")})})}}),C(this,"renderContent",()=>{const{content:e,flow:t,onSelectReason:o,selectedReason:i}=this.props;return e||(t===y.b.REPORT?this.flagOptions.renderFlagLabels({flagReason:this.props.flagReason||"__default",onSelectReason:o,selectedReason:i}):t===y.b.END?Object(O.jsx)("span",{style:k.contents,children:s.a._("We’ll use your feedback to make your Pinterest experience better.","final message in reporting flow","final message in reporting flow")}):void 0)})}componentDidUpdate(e){const{flow:t,onCompletedReport:o,onCompletedBlock:i}=e;if(this.props.flow!==t)switch(t){case y.b.REPORT:o&&o();break;case y.b.BLOCK:i&&i()}}render(){const{aggregated_rich_data_type:e,board:t,className:o,detailedReasons:n,flagType:a,flow:l,status:c,onClose:d,pin:u,selectedReason:h,submitButton:p,flagReason:m,showPrimaryAction:f,users:b}=this.props;let j=e;if(!j&&u&&u.rich_metadata){const e=u.rich_metadata;["recipe","tutorial"].forEach(t=>{e[t]&&e[t].from_aggregated_data&&e[t].additional_data.url&&(j=t)})}let _,T=null;return l===y.b.REPORT&&(T=void 0===m?Object(O.jsx)(g.f,{onClick:this.handleClose,text:s.a._("Cancel","cancel form","cancel form")}):Object(O.jsx)(g.f,{onClick:this.handleRevert,text:s.a._("Back","previous step in a form","previous step in a form")})),l===y.b.REPORT?y.c.PROCESSING===c||this.flagOptions.getFlagOption(h)&&this.flagOptions.getFlagOption(h).isTerminalReason?_=p:f&&(_=Object(O.jsx)(g.f,{color:"red",disabled:void 0===h,onClick:this.handleNext,text:s.a._("Next","go to the next view in the report flow","go to the next view in the report flow")})):l===y.b.END&&(_=Object(O.jsx)(g.f,{color:"red",onClick:this.handleClose,text:s.a._("Got it","confirm reporting flow is done & close modal","confirm reporting flow is done & close modal")})),Object(O.jsx)("div",{className:r()(o,{FlagBase:l===y.b.REPORT}),children:l===y.b.BLOCK?Object(O.jsx)(x,{board:t,detailedReasons:n,flagReason:m,flagType:a,onClose:d,selectedReason:h,status:c,users:b}):Object(O.jsxs)(i.Fragment,{children:[Object(O.jsx)("div",{className:r()("flagContent",{withBadRichDataLabel:j,modalActionDescription:l===y.b.BLOCK&&c===y.c.COMPLETED}),style:l===y.b.END||"IP"===m?k.contentContainer:null,children:this.renderContent()}),Object(O.jsx)("div",{className:"formFooter",children:Object(O.jsxs)(g.e,{display:"flex",alignItems:"center",children:[Object(O.jsx)(g.e,{flex:"grow",children:this.renderPolicyLink()}),Object(O.jsx)(g.e,{padding:1,children:T}),Object(O.jsx)(g.e,{padding:1,children:_})]})})]})})}}},"7wLh":function(e,t,o){var i=o("q1tI"),n=o("/MKj"),r=o("TSYQ"),s=o.n(r),a=o("7dZ5"),l=o("Ye/N"),c=o("TgLd"),d=o("qD10"),u=o("kmwA"),h=o("zwad"),p=o("BJm1"),m=o("ty8j"),f=o("n6mq"),g=o("1E1Y"),b=o("nKUr");const j=u.a.settings.ABOUT_DMCA_PIN_URL,O="policies";t.a=Object(n.connect)(null,(function(e){return{reportDidIt:(t,o,i,n,r)=>e(Object(p.c)(t,o,i,n,r))}}))(({aggregatedPinDataId:e,didItDataId:t,onClose:o,pinId:n,reportDidIt:r,username:u,users:p})=>{const[_,T]=Object(i.useState)([]),[E,y]=Object(i.useState)(),[w,v]=Object(i.useState)(),{flow:x,modalTitle:I,selectedReason:D,setFlow:C,setModalTitle:R,setSelectedReason:k,setStatus:S,status:P}=Object(m.b)();Object(i.useEffect)(()=>{R((()=>{if(x===g.b.REPORT)switch(w){case"attacks":return l.a._("What's going on?","title for report content flow");case O:return l.a._("What's wrong with this Try?","title for report content flow","title for report content flow");case"IP":return l.a._("Intellectual Property","title for report content flow for IP complaints","title for report content flow for IP complaints");default:return l.a._("What's wrong with this Try?","title for the report content flow","title for the report content flow")}else if(x===g.b.END&&_.includes("notUseful"))return l.a._("Thanks for letting us know!","title at end of report flow when content is not useful","title at end of report flow when content is not useful");return""})())},[_,x,w]);const A=Object(b.jsx)(f.f,{color:"red",onClick:()=>{if(S(g.c.PROCESSING),"ignoreThisPin"===D)C(g.b.BLOCK),S(g.c.STARTED);else{const o=[..._,D];T(o),r(e,o,t,E,u),_.includes("notUseful")?(C(g.b.END),S(g.c.STARTED)):(C(g.b.BLOCK),S(g.c.STARTED))}},text:l.a._("Report content","button to report content")});return Object(b.jsx)(c.b,{accessibilityModalLabel:l.a._("Report conversation","Pin.DidIt.Report","Accessibility label for report pin did it"),heading:I,onDismiss:o(!1),size:"md",children:Object(b.jsx)(a.a,{className:s()({FlagContent:x===g.b.REPORT}),content:"IP"===w?Object(b.jsx)(f.e,{mdDisplay:"flex",justifyContent:"center",children:Object(b.jsxs)(f.e,{mdColumn:9,children:[Object(b.jsx)(f.e,{padding:2,marginStart:2,children:Object(b.jsx)(f.Y,{align:"center",color:"darkGray",weight:"bold",children:l.a._("If you’ve found content that you believe violates your intellectual property, you can fill out our copyright complaint form.","explanation of IP complaint process","explanation of IP complaint process")})}),Object(b.jsx)(f.e,{padding:2,children:Object(b.jsx)(f.Y,{align:"center",children:Object(b.jsx)(d.a,{to:h.a.appendQueryString(j,{pin_id:n,user_did_it_id:t}),className:s()(["Button","btn","primary","rounded"]),target:!0,children:l.a._("File a report","link to DMCA form","link to DMCA form")})})})]})}):null,flagType:g.a.DID_IT,flow:x,onClose:o(!0),onNext:()=>{v(D),T([..._,D]),k()},onRevert:()=>{const e=_[_.length-1],t=_.slice(0,-1);k(e),v(t[t.length-1]),T(t),y(),S(void 0===e?g.c.STARTED:g.c.SELECTED)},onSelectReason:(e,t,o)=>{e&&(k(t),S(g.c.SELECTED),y(o))},showPrimaryAction:"IP"!==w,submitButton:A,status:P,selectedReason:D,flagReason:w,users:p,flagOptionsConfig:{__default:[{text:l.a._("It isn't useful or relevant","tried-it reporting flow","tried-it reporting flow"),value:"ignoreThisPin",isTerminalReason:!0,category:"ignoreThisPin"},{text:l.a._("It shouldn't be on Pinterest","tried-it reporting flow","tried-it reporting flow"),value:O,isTerminalReason:!1},{text:l.a._("It's spam","tried-it reporting flow","tried-it reporting flow"),value:"spam",isTerminalReason:!0,category:"spam"},{text:l.a._("It's my intellectual property","tried-it reporting flow","tried-it reporting flow"),isTerminalReason:!1,value:"IP"}],ignoreThisPin:[],policies:[{text:l.a._("It's sexually explicit","tried-it reporting flow","tried-it reporting flow"),value:"nudity",isTerminalReason:!0,category:"nudity"},{text:l.a._("It's self-harm","an option on tried-it reporting flow","an option on tried-it reporting flow"),value:"self-harm",isTerminalReason:!0,category:"self-harm"},{text:l.a._("It's hate speech","tried-it reporting flow","tried-it reporting flow"),value:"hate-speech",isTerminalReason:!0,category:"hate-speech"},{text:l.a._("It's harassment or bullying","tried-it reporting flow","tried-it reporting flow"),value:"attacks",isTerminalReason:!1,category:"attacks"},{text:l.a._("It's graphic violence","tried-it reporting flow","tried-it reporting flow"),value:"gore",isTerminalReason:!0,category:"graphic-violence"}],attacks:[{text:l.a._("It's a photo of me or my child","tried-it reporting flow","tried-it reporting flow"),value:"harassingMeOrMyChild",isTerminalReason:!0,category:"attacks"},{text:l.a._("It identifies and attacks me or someone I know","tried-it reporting flow","tried-it reporting flow"),value:"harassingMeOrAFriend",isTerminalReason:!0,category:"attacks"},{text:l.a._("Something else","tried-it reporting flow","tried-it reporting flow"),value:"harassingOther",isTerminalReason:!0,category:"attacks"}],IP:[],spam:[]}})})})},BJm1:function(e,t,o){o.d(t,"e",(function(){return c})),o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return u})),o.d(t,"d",(function(){return h})),o.d(t,"c",(function(){return p}));var i=o("uVIr"),n=o("MhBu"),r=o("eOdZ");var s={USER_DID_IT_DATA_CREATE:"USER_DID_IT_DATA_CREATE",USER_DID_IT_DATA_DELETE:"USER_DID_IT_DATA_DELETE",USER_DID_IT_DATA_UPDATE:"USER_DID_IT_DATA_UPDATE",USER_DID_IT_DATA_UPDATE_COMMENT_COUNT:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",USER_DID_IT_DATA_FETCH:"USER_DID_IT_DATA_FETCH"},a=o("KFEb");o("Wer7");function l(e){return{type:s.USER_DID_IT_DATA_DELETE,payload:{id:e}}}function c(e,t){return{type:s.USER_DID_IT_DATA_UPDATE_COMMENT_COUNT,payload:{id:e,increment:t}}}function d({aggregatedPinDataId:e,details:t,fromUnifiedComment:o,image_signatures:n,pin_id:l,username:d,updateParentDidItCount:u}){const h={aggregatedPinDataId:e,details:t,image_signatures:n,pin_id:l};return t=>r.a.create("DidItActivityResource",h).callCreate().then(n=>{const r=n.resource_response.data;t({type:"PIN_DID_IT",payload:{id:l,value:!0}}),t({type:s.USER_DID_IT_DATA_CREATE,payload:{user_did_it_data:r}}),t(Object(i.a)({feedId:e,feedType:o?a.a.UNIFIED_COMMENTS:a.a.USER_DID_IT_DATA,itemIds:[r.id],itemType:r.type})),t(Object(i.a)({feedId:d,feedType:a.a.USER_DID_IT_DATA,itemIds:[r.id],itemType:r.type})),u&&t(c(e,1))},e=>{})}function u({aggregatedPinDataId:e,feedType:t,id:o,isOwnedByMe:i,pinId:s,username:d,updateParentDidItCount:u}){return h=>{r.a.create("DidItActivityResource",{user_did_it_data_id:o,pinId:s}).callDelete().then(r=>{i&&h(function(e){return{type:"PIN_DID_IT",payload:{id:e,value:!1}}}(s)),h(l(o)),h(Object(n.a)({feedId:e,feedType:t||a.a.USER_DID_IT_DATA,itemIds:[o],itemType:"userdiditdata"})),h(Object(n.a)({feedId:d,feedType:a.a.USER_DID_IT_DATA,itemIds:[o],itemType:"userdiditdata"})),h(Object(n.a)({feedId:d,feedType:a.a.UNIFIED_COMMENTS,itemIds:[e],itemType:"userdiditdata"})),u&&h(c(o,-1))},e=>{})}}function h({id:e,details:t,image_signatures:o,pinId:i}){const n={details:t,image_signatures:o,user_did_it_data_id:e,pin_id:i};return e=>{r.a.create("DidItActivityResource",n).callUpdate().then(t=>{const o=t.resource_response.data;e(function(e){return{type:s.USER_DID_IT_DATA_UPDATE,payload:{user_did_it_data:e}}}(o))},e=>{})}}function p(e,t,o,i,s){const c={reason:i,detailed_reasons:t,user_did_it_data_id:o};return t=>{r.a.create("DidItActivityFlagResource",c).callCreate().then(()=>{t(l(o)),t(Object(n.a)({feedId:e,feedType:a.a.USER_DID_IT_DATA,itemIds:[o],itemType:"userdiditdata"})),t(Object(n.a)({feedId:s,feedType:a.a.USER_DID_IT_DATA,itemIds:[o],itemType:"userdiditdata"}))},e=>{})}}},CONZ:function(e,t,o){o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));var i=o("eOdZ");function n(e,t){return async o=>{const{resource_response:n}=await i.a.create("ApiResource",{url:`/v3/storypins/${e}/mentions/`}).callDelete();return o(function(e,t){return{type:"DELETE_PIN_MENTION",payload:{pinId:e,userId:t}}}(e,t)),n}}function r(e){return async t=>{const{resource_response:o}=await i.a.create("MentionsResource",{aggregatedCommentId:e,field_set_key:"comment"}).callDelete(),{data:n}=o;return t(function(e,t){return{type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:e,tagged_users:t}}}(n.id,n.tagged_users)),o}}},CZoQ:function(e,t){e.exports=function(e,t,o){for(var i=o-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}},DR2l:function(e,t,o){o.d(t,"a",(function(){return g})),o.d(t,"b",(function(){return b}));var i=o("q1tI"),n=o("/MKj"),r=o("Ye/N"),s=o("DzJC"),a=o.n(s),l=o("/MAO"),c=o("v/Q4"),d=o("w70y"),u=o("n6mq"),h=o("N84b"),p=o("nKUr");function m(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class f extends i.Component{constructor(...e){super(...e),m(this,"setRef",e=>{e&&!this.list&&(this.list=e.parentElement,this.list&&this.list.addEventListener("scroll",this.handleScroll))}),m(this,"fetchMore",()=>{const{feedResource:e}=this.props;e.isFetching||(e.isAtEnd?window.removeEventListener("scroll",this.handleScroll):e.fetchMore())}),m(this,"handleScroll",a()(()=>{const{feedResource:e}=this.props;if(e.isFetching||e.isAtEnd)return;const t=Object(h.a)(this.list);Object(h.c)(this.list)-Object(h.d)(this.list)-50<t&&this.fetchMore()},10))}componentWillUnmount(){this.list.removeEventListener("scroll",this.handleScroll)}render(){const{feedResource:{data:e,isLoaded:t},users:o,viewer:i}=this.props;if(!t)return Object(p.jsx)("div",{className:"loadingSpinner",children:Object(p.jsx)(u.R,{accessibilityLabel:r.a._("Loading spinner for like list","Accessibility label for loading spinner for like list","Accessibility label for loading spinner for like list"),show:!0})});const n=e&&e.map(e=>e.id?{...e,...o[e.id]}:e);return Object(p.jsx)("div",{style:{maxHeight:"400px"},ref:this.setRef,"data-test-id":"liked-by-list",children:n&&n.map(e=>Object(p.jsx)(u.e,{paddingX:4,paddingY:3,children:Object(p.jsx)(l.a,{isSelf:Boolean(i.isAuth&&i.id&&e.id===i.id),className:"communityItem",showFollow:!0,showName:!0,size:"medium",user:e,viewType:"thumb"})},e.id))})}}function g(e){const t=Object(c.a)(),o=Object(n.useSelector)(({users:e})=>e),i=Object(d.a)({name:"AggregatedCommentLikedByResource",options:{aggregatedCommentId:e.id},allowStale:!1});return Object(p.jsx)(f,{...e,feedResource:i,users:o,viewer:t})}function b(e){const t=Object(c.a)(),o=Object(n.useSelector)(({users:e})=>e),i=Object(d.a)({name:"DidItLikedByResource",options:{didItDataId:e.id},allowStale:!1});return Object(p.jsx)(f,{...e,feedResource:i,users:o,viewer:t})}},HTqQ:function(e,t,o){var i=o("xjqW");t.a=({id:e,viewParameter:t,viewType:o})=>Object(i.b)({id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:o,type:"aggregatedComment"})},JmpY:function(e,t,o){var i=o("eUgh");e.exports=function(e,t){return i(t,(function(t){return e[t]}))}},KwMD:function(e,t){e.exports=function(e,t,o,i){for(var n=e.length,r=o+(i?1:-1);i?r--:++r<n;)if(t(e[r],r,e))return r;return-1}},"N1/J":function(e,t,o){o.d(t,"a",(function(){return d}));var i=o("q1tI"),n=o("PioT"),r=o("Ye/N"),s=o("51gp"),a=o("n6mq"),l=o("nKUr");function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class d extends i.Component{constructor(...e){super(...e),c(this,"state",{isFullscreen:!1,isPlaying:!1,showControls:!0,volumeLevel:0}),c(this,"handleTouch",({event:e})=>{e.stopPropagation(),this.setState(e=>({isPlaying:!e.isPlaying}))}),c(this,"handleShowControls",()=>this.setState({showControls:!0})),c(this,"handleHideControls",()=>this.setState({showControls:!1})),c(this,"handleEnded",e=>{e.event.stopPropagation(),this.setState({isPlaying:!1})}),c(this,"handlePause",e=>{e.event.stopPropagation(),this.setState({isPlaying:!1})}),c(this,"handlePlay",e=>{e.event.stopPropagation(),this.setState({isPlaying:!0})}),c(this,"handleToggleFullscreen",e=>{const{event:t,fullscreen:o}=e;t.stopPropagation(),this.setState({isFullscreen:o})}),c(this,"handleVolumeChange",e=>{const{event:t,volume:o}=e;t.stopPropagation(),this.setState({volumeLevel:o})})}render(){const{item:e,viewType:t}=this.props,{videos:o}=e;if(!o||0===o.length)return null;const i=o[0],{showControls:c,isFullscreen:d,isPlaying:u,volumeLevel:h}=this.state,p=n.b.isSafari(),{V_HLSV4:m}=i.video_list;if(!m)return null;const{height:f,width:g,thumbnail:b,url:j}=m||{},O=[{type:"video/m3u8",src:j}];return Object(l.jsx)(a.X,{onMouseEnter:this.handleShowControls,onMouseLeave:this.handleHideControls,onTap:this.handleTouch,rounding:2,children:Object(l.jsx)(a.B,{rounding:2,willChangeTransform:!(p&&d),wash:!0,children:Object(l.jsx)(s.a,{contextLogData:{view:t,viewParameter:3071,component:172,objectId:e.id,video_id:i.id},accessibilityMaximizeLabel:r.a._("Maximize","Maximize button on video","Maximize button on video"),accessibilityMinimizeLabel:r.a._("Minimize","Minimize button on video","Minimize button on video"),accessibilityMuteLabel:r.a._("Mute","Mute button on video","Mute button on video"),accessibilityPauseLabel:r.a._("Pause","Pause button on video","Pause button on video"),accessibilityPlayLabel:r.a._("Play","Play button on video","Play button on video"),accessibilityUnmuteLabel:r.a._("Unmute","Unmute button on video","Unmute button on video"),aspectRatio:Math.max(g/f,1),captions:"",controls:c,onEnded:this.handleEnded,onFullscreenChange:this.handleToggleFullscreen,onPause:this.handlePause,onPlay:this.handlePlay,onVolumeChange:this.handleVolumeChange,playing:u,poster:b,src:O,volume:h})})})}}},OI9p:function(e,t,o){o.d(t,"c",(function(){return n})),o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return s}));var i=o("eOdZ");function n({commentId:e,tags:t,text:o}){return n=>i.a.create("AggregatedCommentResource",{commentId:e,tags:t,text:o}).callUpdate({showError:!1}).then(i=>{const{tagged_users:r}=i.resource_response.data,s=r.map(e=>Object.assign({},e));n({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:e,tagged_users:s,tags:JSON.parse(t),text:o}}})})}function r({aggregatedCommentId:e,isLikedByMe:t}){return o=>{const n=i.a.create("AggregatedCommentLikeResource",{aggregatedCommentId:e});return t?n.callDelete({showError:!1}):n.callCreate({showError:!1}),o({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:e,reaction_by_me:t?0:1}}})}}function s({aggregatedCommentId:e,isMarkedHelpfulByMe:t}){return o=>{const n=i.a.create("HelpfulResource",{helpfulModelType:1,objectId:e});return t?n.callDelete({showError:!1}):n.callCreate({showError:!1}),o({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:e,marked_helpful_by_me:!t}}})}}},"P/G1":function(e,t,o){var i=o("JmpY"),n=o("7GkX");e.exports=function(e){return null==e?[]:i(e,n(e))}},"Q7+p":function(e,t,o){o.d(t,"a",(function(){return d}));var i=o("MhBu"),n=o("eOdZ"),r=o("he3k"),s=o("KFEb"),a=o("prCw"),l=o("tiNQ"),c=o("BJm1");function d({aggregatedCommentId:e,aggregatedPinId:t,feedType:o,parentId:d,type:u,updateParentCommentCount:h}){return async p=>{const m=await n.a.create("AggregatedCommentResource",{commentId:e,pinId:r.c.TOP===u?d:null}).callDelete({showError:!1});return p(Object(i.a)({feedId:o===s.a.UNIFIED_COMMENTS&&t||d,feedType:o||s.a.AGGREGATED_COMMENTS,itemIds:[e],itemType:"aggregatedcomment"})),p(function(e,t){return{type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:e,aggregatedCommentId:t}}}(d,e)),h&&(u||0===u)&&(u===r.c.TOP?p(Object(a.a)(d,-1)):u===r.c.REPLY_TO_AGGREGATED?p(Object(l.a)(d,-1)):p(Object(c.e)(d,-1))),m}}},"R/W3":function(e,t,o){var i=o("KwMD"),n=o("2ajD"),r=o("CZoQ");e.exports=function(e,t,o){return t==t?r(e,t,o):i(e,n,o)}},WgbR:function(e,t,o){o.d(t,"a",(function(){return u}));var i=o("uVIr"),n=o("eOdZ"),r=o("KFEb"),s=o("prCw"),a=o("tiNQ"),l=o("BJm1"),c=o("xmd6");const d={[c.a.aggregatedComment]:"AggregatedCommentReplyResource",[c.a.pin]:"AggregatedCommentResource",[c.a.didIt]:"DidItCommentsResource"};function u({fromUnifiedComment:e,objectId:t,objectType:o,pinId:c,replyToCommentId:u,tags:h,text:p,updateParentCommentCount:m}){return async f=>{const g=d[o],b={objectId:t,pinId:c,tags:h,text:p,replyToCommentId:u},j="pin"===o&&e?r.a.UNIFIED_COMMENTS:r.a.AGGREGATED_COMMENTS,O=await n.a.create(g,b).callCreate({showError:!1}),_=O.resource_response.data;return f(function(e,t){return{type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:e,aggregatedComment:t}}}(t,_)),f(Object(i.a)({feedType:j,feedId:t,itemIds:[_.id],itemType:_.type})),m&&f("pin"===o&&c?Object(s.a)(c,1):"aggregatedComment"===o?Object(a.a)(t,1):Object(l.e)(t,1)),_.id||O}}},he3k:function(e,t,o){o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return s})),o.d(t,"e",(function(){return a}));const i=48,n=i+8,r=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),s="comment_featured_ids",a="did_it_featured_ids"},ijCd:function(e,t,o){var i=o("R/W3"),n=o("MMmD"),r=o("4qC0"),s=o("Sxd8"),a=o("P/G1"),l=Math.max;e.exports=function(e,t,o,c){e=n(e)?e:a(e),o=o&&!c?s(o):0;var d=e.length;return o<0&&(o=l(d+o,0)),r(e)?o<=d&&e.indexOf(t,o)>-1:!!d&&i(e,t,o)>-1}},pSwN:function(e,t,o){o.d(t,"a",(function(){return s}));var i=o("Ye/N"),n=o("n6mq"),r=o("nKUr");function s({handleFollowClick:e,isFollowing:t,isSelf:o,disabled:s}){const a=t?i.a._("Unfollow"):i.a._("Follow");return o?Object(r.jsx)(n.f,{inline:!0,disabled:!0,text:i.a._("That's you!","Text describing that the person's avatar is you","Text describing that the person's avatar is you")}):Object(r.jsx)(n.f,{color:t?"gray":"red",inline:!0,onClick:e,text:a,disabled:s})}},prCw:function(e,t,o){function i(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}o.d(t,"a",(function(){return i}))},qyXF:function(e,t,o){o.d(t,"a",(function(){return u})),o.d(t,"b",(function(){return h}));var i=o("Ye/N"),n=o("vvax");const r=()=>i.a._("{{ first }}","Generic message that lists 1 item","Generic message that lists 1 item (ex: Stevie)"),s=()=>i.a._("{{ first }} and {{ second }}","Generic message that lists 2 items","Generic message that lists 2 items (ex: Stevie and Michael)"),a=()=>i.a._("{{ first }}, {{ second }} and {{ third }}","Generic message that lists 3 items","Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)"),l=()=>i.a._("{{ first }}, {{ second }}, {{ third }} and {{ fourth }}","Generic message that lists 4 items","Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)"),c=()=>i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}","Generic message that lists 5 items","Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)"),d=()=>i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}","Generic message that lists 6 items","Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)");function u(e){const t={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return Object(n.b)(r(),t);case 2:return Object(n.b)(s(),t);case 3:return Object(n.b)(a(),t);case 4:return Object(n.b)(l(),t);case 5:return Object(n.b)(c(),t);case 6:return Object(n.b)(d(),t);default:return Object(n.b)(i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others","Generic message that lists more than 6 items","Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)"),t)}}function h(e){const t={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return Object(n.b)(r(),t);case 2:return Object(n.b)(s(),t);case 3:return Object(n.b)(a(),t);case 4:return Object(n.b)(l(),t);case 5:return Object(n.b)(c(),t);case 6:return Object(n.b)(d(),t);case 7:return Object(n.b)(i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}","Generic message that lists 7 items","Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)"),t);default:return Object(n.b)(i.a._("{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others","Generic message that lists more than 7 items","Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)"),t)}}},szq7:function(e,t,o){o.d(t,"b",(function(){return n})),o.d(t,"a",(function(){return r}));var i=o("eOdZ");function n({didItDataId:e,isLikedByMe:t}){return o=>{const n=i.a.create("DidItLikeResource",{didItDataId:e});return t?n.callDelete({showError:!1}):n.callCreate({showError:!1}),o(function(e,t){return{type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:t}}}(e,!t))}}function r({didItDataId:e,isMarkedHelpfulByMe:t}){return o=>{const n=i.a.create("HelpfulResource",{helpfulModelType:2,objectId:e});return t?n.callDelete({showError:!1}):n.callCreate({showError:!1}),o(function(e,t){return{type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:t}}}(e,!t))}}},tiNQ:function(e,t,o){function i(e,t){return{type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:t,id:e}}}o.d(t,"a",(function(){return i}))},ty8j:function(e,t,o){o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return c}));var i=o("q1tI"),n=o("1dBE"),r=o("1E1Y"),s=o("nKUr");const{Provider:a,Consumer:l,useHook:c}=Object(n.c)("Flag"),d=({children:e})=>{const[t,o]=Object(i.useState)(),[n,l]=Object(i.useState)(r.b.REPORT),[c,d]=Object(i.useState)(r.c.STARTED),[u,h]=Object(i.useState)(),[p,m]=Object(i.useState)();return Object(s.jsx)(a,{value:{flagReason:p,flow:n,status:c,selectedReason:u,modalTitle:t,setFlagReason:m,setFlow:l,setModalTitle:o,setStatus:d,setSelectedReason:h},children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/271-b10243ecab58acc66bf2.mjs.map